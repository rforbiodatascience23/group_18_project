---
title: "Group 18 Project"
title-slide-attributes:
    data-background-image: images/cover.png
    data-background-size: cover
    data-background-opacity: "0.3"
author: "s213049 - Catia B.<br/>s222373 - Nova F.<br/>s222800 - Laia D.<br/>s222854 - Minke O.<br/>s230204 - Eirini G."
format: 
  revealjs:
    theme: [moon, custom.css]
    transition: "slide"
    center: true
    footer: "Group 18 Project: R for Bio Data Science"
---

# Introduction

-   Prostate cancer is a major global health concern.
-   Radiation therapy, a common treatment, can lead to complications like hemorrhagic cystitis (HC).
-   HC symptoms include bleeding and bladder pain.
-   Our 15-year study with 709 patients examines the impact of different radiotherapy types on HC development.
-   We'll explore data processes, analyses, and insights gleaned from this extensive study.

# Data

Our study involved extensive data preparation, including cleaning and augmenting our dataset. Here's a glimpse into our process:

# Clean

## Libraries and functions for *dat_load1*

::: columns
::: {.column width="50%"}
#### `janitor` `dplyr` `stringr` `lubridate` {.space-below}

`clean_names()`: to simplify and standardizes variable names

`mutate()`: to fix variable types, spelling errors and used to add commas

-   `ymd()`

-   `str_replace_all()`

-   `ifelse()`
:::

::: {.column width="50%"}
::: space-below
``` r
dat_load1 <- dat_load1 |> 
  clean_names()
```
:::

``` r
dat_load1 <- dat_load1 |> 
  mutate(
  
    # Make variable type as Date
    date_of_birth = ymd(date_of_birth),
    
    # ethnicity - make all names lower case, change AA to african american
    ethnicity = ifelse(ethnicity == "AA", "african_american", tolower(ethnicity)),
    
    # radiation_dosage - remove characters "Gy" make the observatons as num
    radiation_dosage =  str_replace_all(radiation_dosage, "Gy", ""),
    radiation_dosage = round(as.numeric(radiation_dosage),2),
    
    # comorbidities add "," to allow separation by ",", str_replace did not work
    comorbidities = ifelse(row_number() == 2, "HTN, A. fib, DM, CHF, tobacco", comorbidities)
```
:::
:::

## Libraries and functions for dat_load2 and dat_load3

::: columns
::: {.column width="50%"}

### libraries {.space-below}

`select()`

`rename()`

`pivot_longer()`

`distinct()`
:::

::: {.column width="50%"}
::: space-below
``` r
dat_load2 <- dat_load2 |> 
  select(-rads_for_prostate_primary, 
         -rads_bladder_primary, 
         -developed_bladder_first,
         -developed_prostate_first)

dat_load2 <- dat_load2 |>
  rename(bladder = "bladder_ca")
```
:::

``` r

combined_dat_load2_load3 <- combined_dat_load2_load3 |>
  pivot_longer(cols = ebrt:brachytherapy,
              names_to = "treatment", 
              values_to = "values",
              values_drop_na = TRUE) |>
  distinct(hospital_id, .keep_all = TRUE) |>
  select(-values)
```
:::
:::

# Augment

# Describe

::: columns
::: {.column .img-bg width="50%"}
![Description: The presented plot illustrates the distribution of patients who experienced radiation-induced Hemorrhagic Cystitis (HC) based on the type of treatment received. Utilizing proportions in this visualization offers a comparative view of how different treatments are distributed relative to the total number of cases with HC incidence. Each bar represents the proportion of patients receiving a specific treatment within the categories of HC incidence, providing valuable insights into the treatment patterns in the context of radiation-induced HC.](images/key_plot_1.1-01.png)
:::

::: {.column .img-bg width="50%"}
![Description: the 4 box plots each show the number of patients with HC that had the following variables: Age distribution at radiation treatment for Head and Neck Cancer (HC) patients, BMI distribution of HC patients, Distribution of the number of comorbidities in HC patients and finally the distribution of the number of hospital complications in HC patients.](images/key_plot_1.8-02.png)
:::
:::

# Analysis 1

-   We analyzed two datasets (*`analysis_1.1`* and *`analysis_1.2`*).

-   Key insights include BMI and radiation dose relationships, dose percentages, and time-related comparisons.

-   We also explored survival probabilities and key variable distributions among patients who developed HC.

## Key findings 1

::: columns
::: {.column .img-bg width="50%"}
![This plot shows the Analysis of Radiation Dose Percentages in correlation to the different radiation types. According to literature, a standardized threshold has been added distinguishing Low, Medium, and High Levels across various radiation types. From the plot below, we can observe that high radiation dosages are only used in ebrt,adjuvant and imrt. Also, the two most used radiation therapies are ebrt medium dose and imrt medium dose.](images/key_plot_1.3-01.png)
:::

::: {.column .img-bg width="50%"}
![Description: This boxplot compares the average time passed since the completion of radiation treatment and the first incident of HC. For this the mean of the time passed since the completion of radiation treatment and first incident of HC is calculated and presented on the y-axis while on the x-axis the different types of radiation is shown. This could give an insight of the impact of the radiation type on the occurrence of HC in the patients.](images/key_plot_1.4-02.png)
:::
:::

## Key findings 2

::: columns
::: {.column .img-bg width="50%"}
![Description: This plot illustrates the relationship between radiation dosage and duration across different types of cancer. Each cancer type is represented in a separate subplot for easy comparison, and the points are color-coded by radiation type. This visualization effectively displays complex data in a clear and comparative manner, ideal for in-depth analysis.](images/key_plot_1.10.png)
:::

::: {.column .img-bg width="50%"}
![Description: The boxplot shows the amount of patients with HC and the hospital complications they experienced, while on the y-axis the number of hospital compilations are presented. Only the patients with more than 1 compilation are shown.](images/key_plot_1.11.png)

*Description of the right image.*
:::
:::

# Analysis 2

## Key findings

::: columns
::: {.column .img-bg width="50%"}
![Principal Component Analysis By doing a Principal Component Analysis in the data set we will reduce its dimmensionality and figure out if patients cancer organ have similar values in quantitative variables Grading system, Radiation dosage, Duration of radiation, Number of comorbidities.](images/key_plot_2.1.png){width="80%"}

Data points aren't grouped by cancer organ.

Why do we get this spared data points?

-\> Outliers

-\> Small sample size

-\> Low % explained variance
:::

::: {.column .img-bg width="50%"}
![Description: scatterplot with a linear regression line, using the ggplot2 package. The plot visualizes the relationship between the variables age_at_radiation and num_comorbidities with respect to the number of days admitted to the hospital (num_days_admitted). The plot helps visualize the relationship between age, number of comorbidities, and the predicted number of days admitted. Points that deviate from the regression line may indicate observations with higher or lower than expected days admitted, providing insights into potential patterns or outliers in the data.](images/key_plot_2.4.png)
:::
:::

# Discussion

-   Our study unveils potential underreporting in HC cases, despite advancements in radiation therapy.
-   Limitations include its retrospective nature and focus on the Detroit region.
-   These findings provide valuable insights, informing future medical practices and research.

# Conclusion

Thank you for attending our presentation. We hope our study's insights contribute to better understanding and management of HC in prostate cancer treatment. Any questions or discussions are welcome.
